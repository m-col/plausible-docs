---
title: Configuration options
---

:::note
This section is for self-hosting our analytics on your server and managing your infrastructure (installation, maintenance, upgrades, server capacity, uptime, backup and so on). This is different from Plausible Analytics Cloud where we manage everything for your ease and convenience. [Take a look at the differences between Plausible Cloud and Self-Hosted](https://plausible.io/self-hosted-web-analytics).
:::

When running a Plausible release, the following configuration parameters can be supplied as environment variables.

### Default User Generation

A default user can be generated using the `db init-admin` command. In the default docker-compose setup, this command
is run automatically when you boot the server.

It is *highly* recommended that you configure these parameters.

| Parameter        | Default       | Description                          |
|------------------|---------------|--------------------------------------|
| ADMIN_USER_NAME  | autogenerated | Admin user's name                    |
| ADMIN_USER_EMAIL | autogenerated | The default ("admin") user email     |
| ADMIN_USER_PWD   | autogenerated | The default ("admin") user password. |

### Server

Following are the variables that can be used to configure the availability of the server.

| Parameter            | Default     | Description                                                                                                                                                                                         |
|----------------------|-------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| BASE_URL             | --          | The hosting url of the server, used for URL generation. In production systems, this should be your ingress host. |
| PORT                 | 8000        | The port on which the server is available.                                                                                                                                                          |
| SECRET_KEY_BASE      | --          | An internal secret key used by [Phoenix Framework](https://www.phoenixframework.org/). Follow the [instructions](https://hexdocs.pm/phoenix/Mix.Tasks.Phx.Gen.Secret.html#content) to generate one. |
| DISABLE_AUTH         | false       | Disables authentication completely, no registration, login will be shown.                                                                                                                           |
| DISABLE_REGISTRATION | false       | Disables registration of new users, keep your admin credentials handy ;)                                                                                                                            |

### Database

Plausible uses [PostgreSQL](https://www.tutorialspoint.com/postgresql/postgresql_environment.htm) for storing user data and [ClickhouseDB](https://clickhouse.tech/docs/en/getting-started/tutorial/) for analytics data. Use the following variables to configure it.

| Parameter            | Default                                  | Description                                                                                                               |
|----------------------|-----------------------------------------------------------|---------------------------------------------------------------------------------------------------------|
| DATABASE_URL            | postgres://localhost:5432/plausible_dev | The database URL as dictated [here](https://hexdocs.pm/ecto/Ecto.Repo.html#module-urls), i.e. for external db server postgres://user:password@ip.or.domain.to.server/database_name                                  |
| DATABASE_SOCKET_DIR | -- | Directory where a UNIX socket of postgresql is available. Mutually exclusive with `DATABASE_URL`, can only be used with `DATABASE_NAME` |
| DATABASE_NAME | -- | Name of the database in PostgreSQL to use. Only applicable in conjunction with `DATABASE_SOCKET_DIR` |
| CLICKHOUSE_DATABASE_URL | http://localhost:8123/plausible_dev     | Connection string for Clickhouse in the same format, i.e. for docker-compose setup http://plausible_events_db:8123/plausible_events_db |
| CLICKHOUSE_FLUSH_INTERVAL_MS | 5000 | Interval (in milliseconds) between flushing events and sessions data to Clickhouse. Consult [Clickhouse docs](https://clickhouse.tech/docs/en/introduction/performance/#performance-when-inserting-data) before changing it. |
| CLICKHOUSE_MAX_BUFFER_SIZE | 10000 | Maximum size of the buffer of events or sessions. Consult [Clickhouse docs](https://clickhouse.tech/docs/en/introduction/performance/#performance-when-inserting-data) before changing it. |


### Mailer/SMTP Setup

Plausible uses a SMTP server to send transactional emails e.g. account activation, password reset, weekly reports, etc.

| Parameter             | Default   | Description                                      |
|-----------------------|-----------|--------------------------------------------------|
| MAILER_EMAIL          | hello@plausible.local  | The email id to use for as _from_ address of all communications from Plausible.|
| SMTP_HOST_ADDR        | localhost              | The host address of your smtp server.                                          |
| SMTP_HOST_PORT        | 25                     | The port of your smtp server.                                                  |
| SMTP_USER_NAME        | --                     | The username/email in case SMTP auth is enabled.                               |
| SMTP_USER_PWD         | --                     | The password in case SMTP auth is enabled.                                     |
| SMTP_HOST_SSL_ENABLED | false                  | If SSL is enabled for SMTP connection                                          |
| SMTP_RETRIES          | 2                      | Number of retries to make until mailer gives up.                               |

Alternatively, you can use Postmark to send transactional emails. In this case, use the following parameters:

| Parameter          | Default            | Description                                                                                          |
|--------------------|--------------------|------------------------------------------------------------------------------------------------------|
| MAILER_ADAPTER     | Bamboo.SMTPAdapter | Instead of the default, replace this with `Bamboo.PostmarkAdapter`  |
| POSTMARK_API_KEY   | --                 | Enter your API key.                                                 |


### IP Geolocation

Plausible uses the country database created by [dbip](https://db-ip.com/) for enriching analytics data with visitor countries. The
database is shipped with Plausible and country data collection happens automatically.

Optionally, you can provide different database. For example, you can use [MaxMind](https://www.maxmind.com) services.
You need to create an account and download their **GeoLite2 Country** database.

Once you have the database, mount it on the Plausible docker image and configure the path of the database file:

| Parameter           | Default   | Description                                                                                          |
|---------------------|-----------|------------------------------------------------------------------------------------------------------|
| GEOLITE2_COUNTRY_DB | -- (internal database) | Path to your IP geolocation database in MaxMind's format  |

To make this as easy as possible you can use the [`maxmindinc/geoipupdate`](https://hub.docker.com/r/maxmindinc/geoipupdate) Docker image.
You just need to add your account details, mount the database in the `plausible` container and let the image update the database automatically.
To run the complete setup including geoip see [`docker-compose-geoip.yml`](https://github.com/plausible/hosting/blob/master/geoip/docker-compose.geoip.yml).

### Google Integration

To integrate your Plausible instance with Google Search Console or Google Analytics, you need to authorize your self-hosted installation with a Google Account. For the OAuth flow, you need to configure the `client_id` and `client_secret`.

#### Steps to set up Google Authorization

1. Visit the
[Google API Console](https://console.developers.google.com/) to obtain OAuth 2.0 credentials such as a Client ID and Client Secret key that are
known to both Google and your installation. Once on the API Console, create a new project. 

![google1](https://user-images.githubusercontent.com/85956139/132954658-2d5bc2c3-22c2-4300-b9c6-cbe4f8f8987e.png)

2. On the project, go to the "Credentials" screen and get your Client ID and Client Secret key.

![google2](https://user-images.githubusercontent.com/85956139/132954742-bb9c3477-b84a-40a5-a2eb-f9fa683804cf.png)

![google3](https://user-images.githubusercontent.com/85956139/132954858-ef951349-20b0-4675-bf9c-ead8d4bc292b.jpg)

3. Go to your Plausible installation's public URL followed by `/auth/google/callback` as "Authorized redirect URI".

4. Copy the Client ID and Client Secret key from your project in Google API Console into these config values:

| Parameter           | Default   | Description                                                                                          |
|---------------------|-----------|------------------------------------------------------------------------------------------------------|
| GOOGLE_CLIENT_ID    | --        | The Client ID from the Google API Console for your Plausible Analytics project                       |
| GOOGLE_CLIENT_SECRET| --        | The Client Secret from the Google API Console for your Plausible Analytics project                   |

#### Steps to Integrate Google Search Console and/or Google Analytics

After setting up Google authorization, you also need to enable some APIs on your Google API project:

- "[Google Search Console API](https://console.developers.google.com/apis/api/searchconsole.googleapis.com)" for Search Console integration
- "[Google Analytics Reporting API](https://console.developers.google.com/apis/api/analyticsreporting.googleapis.com)" for Google Analytics integration

1. Click on "Enable APIs and Services."

![google_enable_1](https://user-images.githubusercontent.com/85956139/132954489-34071ab3-dd96-44ab-83be-02431a888df9.jpg)

2. Search for "Google Search Console API" or "Google Analytics Reporting API" in the search bar of the API Library.

![google_enable2](https://user-images.githubusercontent.com/85956139/132954499-bc96eb44-d94b-4413-8e0e-c2008fc60242.png)

3. Click on the API and the button to enable.

![google_enable3](https://user-images.githubusercontent.com/85956139/132954503-df8caff9-8654-4ec0-87eb-4d76363ebc75.png)

![google_enable4](https://user-images.githubusercontent.com/85956139/132954508-290bda57-47cf-4cda-bb6d-77a1c8baa485.png)

Lastly, see [the Search Console Integration](google-search-console-integration.md) and [Google Analytics Integration](google-analytics-integration.md) docs for the rest of the set up. 

### Twitter Integration

To automatically display tweets that link to your sites, you need a Twitter API key. You need to first apply for an API key on [Twitter's Developer site](https://developer.twitter.com/en/apply-for-access). It may take a while for them to get back to you.

When the app is created, note down your API key and API key secret. Then, in the Developer Portal, select your project from the sidebar and go to the "Keys and tokens tab". Here you can generate an "Access Token & Secret" which you will also need.

| Parameter                   | Default | Description                                                               |
|-----------------------------|---------|---------------------------------------------------------------------------|
| TWITTER_CONSUMER_KEY        | --      | The API key from the Twitter Developer Portal                             |
| TWITTER_CONSUMER_SECRET     | --      | The API key secret from the Twitter Developer Portal                      |
| TWITTER_ACCESS_TOKEN        | --      | The access token you generated in the steps above                         |
| TWITTER_ACCESS_TOKEN_SECRET | --      | The access token secret you generated in the steps above                  |

Once you've added these environment variables and restarted Plausible, you should see the relevant tweets the next day -- they are only fetched once every 24 hours. For more information on the Twitter integration, see [Twitter referrals](twitter.md).

:::note
Self-hosting our analytics product is free as in beer. You only need to pay for your server and whatever cost there is associated with running a server. You never have to pay any fees to us, only to your cloud server provider. If you choose to self-host Plausible you can [become a sponsor](https://github.com/sponsors/plausible) which is a great way to give back to the community and to contribute to the long-term sustainability of the project. Simply put, we treat sponsors like paying customers which means you can receive guaranteed priority support.
:::
